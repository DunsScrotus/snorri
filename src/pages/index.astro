---
// Homepage layout

import Layout from '../layouts/Layout.astro';
import BlogCard from '../components/BlogCard.astro';
import Button from '../components/Button.astro';
import { getCollection, getEntry } from 'astro:content';

const home = await getEntry('page', 'home');
const posts = await getCollection('writing');
const { Content } = await home.render();
---

<Layout title="Snorri of the Stars">
	<main class="site">
		<h1 class="logo">Snorri of the Stars</h1>
		<h2 class="hidden">Queer astrologer in Montreal</h2>
		<div class="section intro">
			<p class="h3">{home.data.intro}</p>
			<div class="image-container">
				<img src={home.data.image} alt={home.data.title} />
			</div>
			<div class="content">
				<Content />
			</div>
		</div>

		<!-- <div class="section">
			<div class="section-heading">
				<h2>Writing</h2>
				<a class="small" href="/writing">See all</a>
			</div>
			
			<div class="blog-grid">
				{posts.map(post => (
					<a href={`/${post.slug}`} class="card-link">
						<BlogCard
							title={post.data.title}
							description={post.data.description}
							image={post.data.image}
						/>
					</a>
				))}
			</div>
			<Button title="Sign up for email newsletter" href="/newsletter" className="newsletter" icon="true"/>
		</div> -->
	</main>
</Layout>

<style>
	.site{
		height: 95vh;
		max-height: 100vh;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		gap: 1rem;
		overflow: hidden;
		max-width: 100%;
	}
	.hidden{
		height: 0;
		position: absolute;

	}

	.logo{
		font-size: 9vw;
	}

</style>